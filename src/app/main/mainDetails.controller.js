(function() {
  'use strict';

  angular
    .module('kwickieToolkit')
    .controller('MainDetailsController', MainDetailsController);

  /** @ngInject */
  function MainDetailsController($scope, dataService, $routeParams, $http) {

    $scope.topicId = $routeParams.sessionsId;

    $http.get('https://bigdev.kwickie.com/api/Topics/' + $routeParams.sessionsId).success(function(data) {

      $scope.TopicDetails = data;

      $scope.formDetails = {
          'FirstName': data.firstName,
          'LastName': data.lastName,
          'Email': data.email,
          'Password': data.password,
          'ProfilePicture': data.profilePicturePath,
          'CoverImage': data.coverImage,
          'CelebVerified': data.celebVerified,
          'AutoGenerated': data.autogenerated,
          'Featured': data.featured,
          'BioText': data.bioText
      };

    });

    $scope.submit = function() {

        $scope.list = this.formDetails;

        var dataobj = {
          'firstName': $scope.list.FirstName,
          'lastName': $scope.list.LastName,
          'email': $scope.list.Email,
          'profilePicturePath': $scope.list.ProfilePicture,
          'coverImage': $scope.list.CoverImage,
          'celebVerified': $scope.list.CelebVerified,
          'autogenerated': $scope.list.AutoGenerated,
          'featured': $scope.list.Featured,
          'bioText': $scope.list.BioText
        };

        //$scope.memberPreview.push();

        console.log(dataobj);

        $http.put('https://bigdev.kwickie.com/api/Topics/' + $routeParams.membersId, dataobj).success(function(data) {

        console.log(data);

        });

    };


  }
})();
